!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.importHTML=e():t.importHTML=e()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e,r){"use strict";(function(t){let n,i,o;function c(){let e,r=0,c=!1;for(let o in t)if(t.hasOwnProperty(o)){for(let e=0;e<window.frames.length;e++){if(window.frames[e]===t[o]){c=!0;break}}if(!c&&(0===r&&o!==n||1===r&&o!==i))return o;r++,e=o}if(e!==o)return e}function s(){n=i=void 0;for(let e in t)t.hasOwnProperty(e)&&(n?i||(i=e):n=e,o=e);return o}function u(t){const e=t.indexOf(">")+1,r=t.lastIndexOf("<");return t.substring(e,r)}r.d(e,"a",(function(){return c})),r.d(e,"c",(function(){return s})),r.d(e,"b",(function(){return u}))}).call(this,r(1))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";r.r(e);var n=r(0),i=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/<(script)\s+((?!type=('|')text\/ng-template\3).)*?>.*?<\/\1>/i,c=/.*\ssrc=('|")(\S+)\1.*/,s=/.*\sentry\s*.*/,u=/<(link)\s+.*?>/gi,l=/.*ignore\s*.*/,f=/<style[^>]*>[\s\S]*?<\/style>/gi,a=/\s+rel=("?|'?)stylesheet\1.*/,p=/.*\shref=('?|"?)(\S+)\1.*/,y=/<style(\s+|\s+.+\s+)ignore(\s*|\s+.*)>/i,h=/<!--([\s\S]*?)-->/g,d=/<script(\s+|\s+.+\s+)ignore(\s*|\s+.*)>/i;function m(t){return t.startsWith("//")||t.startsWith("http://")||t.startsWith("https://")}function w(t){return t.endsWith("/")?t.substr(0,t.length-1):t}var x=function(t){return"\x3c!-- link ".concat(t," replaced by import-html-entry --\x3e")},b=function(t){return"\x3c!-- script ".concat(t," replaced by import-html-entry --\x3e")},g="\x3c!-- inline scripts replaced by import-html-entry --\x3e",v=function(t){return"\x3c!-- ignore asset ".concat(t||"file"," replaced by import-html-entry --\x3e")};r.d(e,"default",(function(){return T})),r.d(e,"importEntry",(function(){return _}));const S={},j={},O={},E=window.fetch.bind(window);function P(t,e){let r=t;return W(e).then(t=>r=e.reduce((e,r,n)=>e=e.replace(x(r),`<style>/* ${r} */${t[n]}</style>`),r))}function W(t){return Promise.all(t.map(t=>t.startsWith("<")?Object(n.b)(t):S[t]||(S[t]=E(t).then(t=>t.text()))))}function M(t){return Promise.all(t.map(t=>t.startsWith("<")?Object(n.b)(t):j[t]||(j[t]=E(t).then(t=>t.text()))))}function $(t,e,r=window){return M(e).then(i=>{window.proxy=r;const o=eval;function c(s,u){if(s<e.length){!function(e,i,c){if(e===t){Object(n.c)();try{o(`;(function(window){;${i}\n}).bind(window.proxy)(window.proxy);`)}catch(t){throw console.error(`error occurs while executing the entry ${e}`),t}c(r[Object(n.a)()]||{})}else try{o(`;(function(window){;${i}\n}).bind(window.proxy)(window.proxy);`)}catch(t){throw console.error(`error occurs while executing ${e}`),t}}(e[s],i[s],u),c(s+1,u)}}return new Promise(t=>c(0,t))})}function T(t){return O[t]||(O[t]=E(t).then(t=>t.text()).then(e=>{const{template:r,scripts:S,entry:j,styles:O}=function(t,e){var r=[],S=[],j=null;return{template:t.replace(h,"").replace(u,(function(t){if(!!t.match(a)){var r=t.match(p),n=t.match(l);if(r){var i=document.createElement("div");i.innerHTML=r.input;var o=r&&i.childNodes[0].href,c=o;return o&&!m(o)&&(c=w(e)+(o.startsWith("/")?o:"/".concat(o))),n?v(c):(S.push(c),x(c))}}return t})).replace(f,(function(t){return y.test(t)?v("style file"):t})).replace(i,(function(t){var i=t.match(d);if(o.test(t)){var u=t.match(s),l=(t.match(c),document.createElement("div"));l.innerHTML=t;var f=l.childNodes[0].src;if(j&&u)throw new SyntaxError("You should not set multiply entry script!");return f&&!m(f)&&(f=w(e)+(f.startsWith("/")?f:"/".concat(f))),j=j||u&&f,i?v(f||"js file"):f?(r.push(f),b(f)):t}return i?v("js file"):(Object(n.b)(t).split(/[\r\n]+/).every((function(t){return!t.trim()||t.trim().startsWith("//")}))||r.push(t),g)})),scripts:r=r.filter((function(t){return!!t})),styles:S,entry:j||r[r.length-1]}}(e,function(t){try{return new URL(t.startsWith("//")?`${location.protocol}${t}`:t).origin}catch(t){return""}}(t));return P(r,O).then(t=>({template:t,getExternalScripts:()=>M(S),getExternalStyleSheets:()=>W(O),execScripts:t=>$(j,S,t)}))}))}function _(t){if(!t)throw new SyntaxError("entry should not be empty!");if("string"==typeof t)return T(t);if(Array.isArray(t.scripts)||Array.isArray(t.styles)){const{scripts:e=[],styles:r=[],html:n=""}=t;return P(n,r).then(t=>({template:t,getExternalScripts:()=>M(e),getExternalStyleSheets:()=>W(r),execScripts:t=>$(e[e.length-1],e,t)}))}throw new SyntaxError("entry scripts or styles should be array!")}}]).default}));
//# sourceMappingURL=import-html-entry.min.js.map